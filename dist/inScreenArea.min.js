!function($){"use strict";var id=0;$.fn.inScreenArea=function(options){var $main=this,settings=$.extend({context:$(window),height:"100%",offset:0,elementTolerance:0,debug:!1,debugOptions:{background:"rgba(0, 110, 85, 0.2)",zIndex:"999",elIdentifier:!0,elIdentifierStyle:{"in":"2px green dotted",out:"2px red dotted"}},onScrollDelay:200,onResizeDelay:200},options);$main.id=id++;var app={areaOffset:0,areaHeight:0,alive:!0,init:function(){this.calcArea(),this.watch(),this.debug.init(),this.destroy()},calcArea:function(){this.areaOffset=this.unitTranslator(settings.offset,settings.context.height()),this.areaHeight=this.unitTranslator(settings.height,settings.context.height())},watch:function(){var t=this;if(t.inView(),settings.onScrollDelay){var e;settings.context.on("resize scroll.inScreenArea"+$main.id,function(){e=setTimeout(function(){t.inView()},settings.onScrollDelay)})}else settings.context.on("resize scroll.inScreenArea"+$main.id,function(){t.inView()});t.calcArea();var i;settings.context.resize(function(){i&&clearTimeout(i),i=setTimeout(function(){t.calcArea()},settings.onResizeDelay)})},inView:function(){var t=this;$.each($main,function(){var e=this.getBoundingClientRect();t.positionChecker(e)?($(this).trigger("inSA:in",e,$main),settings.debug&&settings.debugOptions.elIdentifier&&t.debug.setOutline(!0,$(this))):($(this).trigger("inSA:out",e,$main),settings.debug&&settings.debugOptions.elIdentifier&&t.debug.setOutline(!1,$(this)))})},positionChecker:function(t){return 0==this.elementTolerance?t.top>=this.areaOffset&&t.bottom<=this.areaOffset+this.areaHeight:(this.elPercentage=this.unitTranslator(settings.elementTolerance,t.height),t.top>=this.areaOffset-this.elPercentage&&t.bottom<=this.areaOffset+this.areaHeight+this.elPercentage)},unitTranslator:function(unit,relative){var _this=this;if(unit!==parseInt(unit))if(unit.indexOf("calc")>=0){unit=unit.replace("calc(","").replace(")","");var unitExploded=unit.split(" ");$.each(unitExploded,function(t,e){0==/[+\-*\/]/.test(e)&&(unitExploded[t]=_this.unitTranslator(e,relative))}),unit=eval(unitExploded.join(" "))}else unit=unit.indexOf("%")>=0?relative*(parseInt(unit)/100):parseInt(unit);return Math.round(unit)},debug:{init:function(){if(settings.context.get()!=$(window).get()&&console.warn("debugging doesn't work well on windows that aren't fullscreen"),settings.debug){var t=$("<div>").css({position:"fixed","z-index":settings.debugOptions.zIndex,width:"100%",height:settings.height,top:settings.offset,left:0,background:settings.debugOptions.background,"pointer-events":"none"});$("body").append(t)}},setOutline:function(t,e){t?e.css({outline:settings.debugOptions.elIdentifierStyle["in"],"outline-offset":-4}):e.css({outline:settings.debugOptions.elIdentifierStyle.out,"outline-offset":-4})}},destroy:function(){$main.destroy=function(){settings.context.off(".inScreenArea"+$main.id)}}};return app.init(),$main}}(jQuery);